<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–ª–µ–∫—Å–µ–π | Dashboard</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/css/twa.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="bg-blob blob-1"></div>
    <div class="bg-blob blob-2"></div>

    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="logo-container">
                <h1>–ê–ª–µ–∫—Å–µ–π</h1>
                <p>AI Marketing Engine</p>
            </div>
            <div class="status-pill status-online" id="api-status-pill">
                <span class="dot blink"></span>
                <span id="api-status-text">–û–ù–õ–ê–ô–ù</span>
            </div>
        </header>

        <!-- View: Dashboard -->
        <div id="dashboard-view" class="view active">
            <div class="metrics-row">
                <div class="metric-mini">
                    <span class="label">–í—Å–µ–≥–æ –ª–∏–¥–æ–≤</span>
                    <span class="value" id="total-leads">-</span>
                </div>
                <div class="metric-mini">
                    <span class="label">–î–∏–∞–ª–æ–≥–∏ 24—á</span>
                    <span class="value" id="active-dialogues">-</span>
                </div>
            </div>
            <div class="metrics-row">
                <div class="metric-mini">
                    <span class="label">–°–æ–æ–±—â–µ–Ω–∏–π –¢–æ—Ç.</span>
                    <span class="value" id="total-messages">-</span>
                </div>
                <div class="metric-mini">
                    <span class="label">–°–µ–≥–æ–¥–Ω—è</span>
                    <span class="value" id="messages-today">-</span>
                </div>
            </div>

            <h3 style="margin: 24px 0 16px;">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
            <div class="list-container" id="recent-activity">
                <div class="card skeleton" style="height: 60px;"></div>
                <div class="card skeleton" style="height: 60px;"></div>
                <div class="card skeleton" style="height: 60px;"></div>
            </div>
        </div>

        <!-- View: Leads -->
        <div id="leads-view" class="view">
            <div class="search-container">
                <span class="search-icon">üîç</span>
                <input type="text" id="leads-search" placeholder="–ü–æ–∏—Å–∫ –ª–∏–¥–æ–≤...">
            </div>
            <div class="list-container" id="leads-list">
                <!-- Leads will be injected here -->
            </div>
        </div>

        <!-- View: Parser -->
        <div id="parser-view" class="view">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                    <div>
                        <h3 id="parser-status-label">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                        <p id="parser-current-activity" style="font-size: 13px; color: var(--tg-hint-color); margin-top: 4px;">--</p>
                    </div>
                    <div class="status-pill" id="parser-pill">
                        <span class="dot"></span>
                        <span id="parser-pill-text">--</span>
                    </div>
                </div>
                <button id="parser-toggle-btn" class="btn btn-primary">–ó–ê–ü–£–°–¢–ò–¢–¨</button>
            </div>

            <div class="metrics-row">
                <div class="metric-mini">
                    <span class="label">–ù–∞–π–¥–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</span>
                    <span class="value" id="parser-vacancies-found">-</span>
                </div>
                <div class="metric-mini">
                    <span class="label">–û—Ç–∫–ª–∏–∫–æ–≤</span>
                    <span class="value" id="parser-responses-sent">-</span>
                </div>
            </div>

            <h3 style="margin: 24px 0 16px;">–°–≤–µ–∂–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h3>
            <div class="list-container" id="recent-vacancies">
                <!-- Vacancies will be injected here -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-view="dashboard">
            <i>üìä</i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="nav-item" data-view="leads">
            <i>üë§</i>
            <span>–õ–∏–¥—ã</span>
        </a>
        <a href="#" class="nav-item" data-view="parser">
            <i>üîç</i>
            <span>–ü–∞—Ä—Å–µ—Ä</span>
        </a>
    </nav>

    <!-- Modal for Lead History -->
    <div id="lead-modal" class="modal">
        <div class="modal-content">
            <div style="width: 40px; height: 5px; background: var(--glass-border); border-radius: 10px; margin: -12px auto 20px;"></div>
            <h3 id="modal-lead-name">–ò—Å—Ç–æ—Ä–∏—è</h3>
            <p id="modal-lead-info" style="font-size: 12px; color: var(--tg-hint-color); margin-bottom: 20px;">@username</p>
            <div class="history-container" id="modal-messages">
                <!-- Messages will be injected here -->
            </div>
        </div>
    </div>

    <script src="/js/twa.js"></script>
</body>
</html>
